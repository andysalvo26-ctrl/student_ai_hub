# Student AI Hub — Site Guide (Preview)

## What this is

This is a preview assistant widget for the Student AI Hub site. It helps visitors navigate the site and find information by answering questions based on the pages included in the preview demo corpus.

**Key characteristics:**
- **Preview/demo only**: This is not the final assistant. It may be incomplete.
- **Client-side retrieval**: Retrieval happens in the browser using simple term matching.
- **Worker-based generation**: Answers are generated by a Cloudflare Worker using OpenAI, grounded in retrieved chunks.
- **Embed-friendly**: Designed to be embedded in Wix or other platforms.

## What this is not

- **Not the final assistant**: This is a preview implementation
- **Not trained**: Does not use machine learning or training processes
- **Not official**: This is a preview widget, not the final production assistant
- **Not comprehensive**: Only includes content from the demo corpus pages
- **Not fully accurate**: May miss information or provide incomplete answers

## What the preview assistant does

- Answers questions based on the pages included in the preview demo corpus
- Suggests relevant site pages when appropriate
- Uses simple retrieval (term overlap) to find relevant content
- Generates answers using only the retrieved content (no external information)

## What the preview assistant does not do

- Does not add information not present in the preview materials
- Does not make claims about accuracy or completeness
- Does not provide tool recommendations or policy advice beyond what's in the preview materials
- Does not access external APIs or data sources beyond the demo corpus

## How to run locally

1. Build the demo corpus:
   ```bash
   cd demo_chatbot_v0
   node scripts/build_demo_corpus.js
   ```

2. Build the chatbot:
   ```bash
   node scripts/build.js
   ```

3. Open the generated HTML file:
   ```bash
   open dist/hub-demo-chatbot.html
   ```

   Or serve it with a local server:
   ```bash
   python3 -m http.server 8000
   # Then open http://localhost:8000/dist/hub-demo-chatbot.html
   ```

## Testing

### Running the UI Locally

1. Build the demo corpus and chatbot:
   ```bash
   cd demo_chatbot_v0
   node scripts/build_demo_corpus.js
   node scripts/build.js
   ```

2. Open the generated HTML file:
   ```bash
   open dist/hub-demo-chatbot.html
   ```
   
   Or serve it with a local server:
   ```bash
   python3 -m http.server 8000
   # Then open http://localhost:8000/dist/hub-demo-chatbot.html
   ```

3. Open browser console (F12) to see error codes and debug logs

4. Test queries:
   - "What is this site?" → Should return answer from home.md
   - "What are AI basics?" → Should return answer from ai_basics.md
   - "Tell me about something not in the preview" → Should say "not enough information"

### Testing the Worker Directly

You can test the Cloudflare Worker directly using curl:

```bash
curl -X POST https://student-ai-hub-site-guide-preview.ajs10845.workers.dev \
  -H "Content-Type: application/json" \
  -d '{
    "question": "What is this site?",
    "retrievedChunks": [
      {
        "path": "demo_corpus/pages/home.md",
        "text": "The Student AI Hub provides reference materials about artificial intelligence designed for students.",
        "chunkIndex": 0
      }
    ]
  }'
```

Expected response format:
```json
{
  "answer": "string",
  "suggestedPages": ["/home", "/ai-basics"]
}
```

### What Success Looks Like

**UI Test:**
1. Open `dist/hub-demo-chatbot.html` in browser
2. Ask "What is this site?"
3. **Success**: Answer appears from home.md content
4. **Success**: Suggested pages appear as buttons
5. **Success**: Console shows `[WORKER_ERROR_...]` logs with request/response details

**Worker Test:**
1. Call worker with curl (see above)
2. **Success**: Returns JSON with `answer` and `suggestedPages` fields
3. **Success**: Answer is based on retrieved chunks
4. **Success**: Suggested pages are relevant slugs

**Error Handling:**
- If worker fails, console shows error code (e.g., `[WORKER_ERROR_1234567890]`)
- UI shows user-friendly message
- Worker logs show detailed error information
- All errors return valid JSON (never crashes)

## File structure

```
demo_chatbot_v0/
├── README.md
├── worker.js                    (Cloudflare Worker code)
├── WORKER_SPECIFICATION.md      (Worker API documentation)
├── config/
│   ├── training_manifest.json   (generated: list of included files)
│   └── stopwords.txt          (stopwords for tokenization)
├── scripts/
│   ├── build_demo_corpus.js    (generates demo corpus pages)
│   └── build.js                (builds chatbot dataset and HTML)
├── src/
│   ├── hub-demo-chatbot.template.html  (HTML template)
│   ├── widget.css              (styles)
│   └── widget.js               (retrieval + UI logic)
├── demo_corpus/
│   ├── pages/                  (demo corpus page files)
│   └── meta/                   (manifest and README)
└── dist/
    ├── dataset.json            (chunked dataset)
    ├── manifest_report.json    (summary report)
    └── hub-demo-chatbot.html   (self-contained embed file)
```

## Embedding

The `dist/hub-demo-chatbot.html` file is self-contained and ready for embedding:

### Method 1: Host and Embed (Recommended)
1. Host `hub-demo-chatbot.html` on GitHub Pages, Netlify, etc.
2. In Wix, add "Embed a Site" element
3. Enter the hosted URL
4. Set height: 500-600px, width: 100%

### Method 2: HTML Embed
1. In Wix, add HTML embed element
2. Copy entire contents of `hub-demo-chatbot.html`
3. Paste into Wix HTML embed
4. Set height: 500-600px, width: 100%

## Limitations

- **Simple retrieval**: Uses basic term overlap, not semantic search
- **No context memory**: Each query is independent
- **Fixed dataset**: Only includes demo corpus pages
- **Preview only**: Not intended for production use
- **May be incomplete**: Content may not cover all questions

## Preview note

The preview assistant clearly states:
- "Preview assistant. Answers are based on the pages included in this preview."
- Answers may miss things while the full version is finalized.
